local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local LocalPlayer = Players.LocalPlayer

-- SETTINGS
local PullEnabled = false
local Distance = 5

-- GUI
local ScreenGui = Instance.new("ScreenGui", game.CoreGui)
ScreenGui.Name = "PullGui"

local Frame = Instance.new("Frame", ScreenGui)
Frame.Size = UDim2.new(0, 220, 0, 230)
Frame.Position = UDim2.new(0.05, 0, 0.3, 0)
Frame.BackgroundColor3 = Color3.fromRGB(25,25,25)
Frame.Active = true
Frame.Draggable = true

Instance.new("UICorner", Frame).CornerRadius = UDim.new(0,8)

-- TITLE
local Title = Instance.new("TextLabel", Frame)
Title.Size = UDim2.new(1,0,0,30)
Title.BackgroundTransparency = 1
Title.Text = "Player Pull"
Title.TextColor3 = Color3.new(1,1,1)
Title.Font = Enum.Font.SourceSansBold
Title.TextSize = 18

-- PULL TOGGLE
local Toggle = Instance.new("TextButton", Frame)
Toggle.Position = UDim2.new(0.1,0,0.22,0)
Toggle.Size = UDim2.new(0.8,0,0,35)
Toggle.Text = "Pull : OFF"
Toggle.BackgroundColor3 = Color3.fromRGB(170,0,0)
Toggle.TextColor3 = Color3.new(1,1,1)
Toggle.Font = Enum.Font.SourceSansBold
Toggle.TextSize = 16
Instance.new("UICorner", Toggle)

Toggle.MouseButton1Click:Connect(function()
	PullEnabled = not PullEnabled
	Toggle.Text = PullEnabled and "Pull : ON" or "Pull : OFF"
	Toggle.BackgroundColor3 = PullEnabled and Color3.fromRGB(0,170,0) or Color3.fromRGB(170,0,0)
end)

-- DISTANCE LABEL
local DistLabel = Instance.new("TextLabel", Frame)
DistLabel.Position = UDim2.new(0.1,0,0.45,0)
DistLabel.Size = UDim2.new(0.8,0,0,25)
DistLabel.BackgroundTransparency = 1
DistLabel.TextColor3 = Color3.new(1,1,1)
DistLabel.Text = "Distance : "..Distance

-- SLIDER
local SliderBack = Instance.new("Frame", Frame)
SliderBack.Position = UDim2.new(0.1,0,0.58,0)
SliderBack.Size = UDim2.new(0.8,0,0,10)
SliderBack.BackgroundColor3 = Color3.fromRGB(60,60,60)

local Slider = Instance.new("Frame", SliderBack)
Slider.Size = UDim2.new(0.3,0,1,0)
Slider.BackgroundColor3 = Color3.fromRGB(0,170,255)

local dragging = false

SliderBack.InputBegan:Connect(function(i)
	if i.UserInputType == Enum.UserInputType.MouseButton1 or i.UserInputType == Enum.UserInputType.Touch then
		dragging = true
	end
end)

SliderBack.InputEnded:Connect(function(i)
	if i.UserInputType == Enum.UserInputType.MouseButton1 or i.UserInputType == Enum.UserInputType.Touch then
		dragging = false
	end
end)

RunService.RenderStepped:Connect(function()
	if dragging then
		local mouseX = LocalPlayer:GetMouse().X
		local posX = math.clamp(
			(mouseX - SliderBack.AbsolutePosition.X) / SliderBack.AbsoluteSize.X,
			0,1
		)
		Slider.Size = UDim2.new(posX,0,1,0)
		Distance = math.floor(2 + posX * 18)
		DistLabel.Text = "Distance : "..Distance
	end
end)

local NoCD = Instance.new("TextButton", Frame)
NoCD.Position = UDim2.new(0.1,0,0.72,0)
NoCD.Size = UDim2.new(0.8,0,0,35)
NoCD.Text = "No Cooldown"
NoCD.BackgroundColor3 = Color3.fromRGB(0,120,255)
NoCD.TextColor3 = Color3.new(1,1,1)
NoCD.Font = Enum.Font.SourceSansBold
NoCD.TextSize = 16
Instance.new("UICorner", NoCD)

local NoCDUsed = false

NoCD.MouseButton1Click:Connect(function()
	if NoCDUsed then return end
	NoCDUsed = true

	g = hookfunction(wait, function(seconds)
		return g(0)
	end)

	NoCD.Text = "No Cooldown : ON"
	NoCD.BackgroundColor3 = Color3.fromRGB(100,100,100)
	NoCD.AutoButtonColor = false
end)

RunService.Heartbeat:Connect(function()
	if not PullEnabled then return end
	if not LocalPlayer.Character or not LocalPlayer.Character:FindFirstChild("HumanoidRootPart") then return end

	local root = LocalPlayer.Character.HumanoidRootPart
	local players = Players:GetPlayers()
	local index = 0

	for _,plr in pairs(players) do
		if plr ~= LocalPlayer and plr.Character and plr.Character:FindFirstChild("HumanoidRootPart") then
			index += 1
			local angle = math.rad((-180 / #players) * index)
			local offset = Vector3.new(
				math.cos(angle) * Distance,
				0,
				math.sin(angle) * Distance
			)
			plr.Character.HumanoidRootPart.CFrame =
				root.CFrame * CFrame.new(offset)
		end
	end
end)

local OpenBtn = Instance.new("TextButton", ScreenGui)
OpenBtn.Size = UDim2.new(0, 30, 0, 30)
OpenBtn.Position = UDim2.new(0.02, 0, 0.5, 0)
OpenBtn.Text = "GUI"
OpenBtn.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
OpenBtn.TextColor3 = Color3.new(1,1,1)
OpenBtn.Font = Enum.Font.SourceSansBold
OpenBtn.TextSize = 16
OpenBtn.Active = true
OpenBtn.Draggable = true
OpenBtn.Visible = false

Instance.new("UICorner", OpenBtn).CornerRadius = UDim.new(0,6)

local CloseBtn = Instance.new("TextButton", Frame)
CloseBtn.Size = UDim2.new(0, 30, 0, 30)
CloseBtn.Position = UDim2.new(1, -35, 0, 5)
CloseBtn.Text = "X"
CloseBtn.BackgroundColor3 = Color3.fromRGB(170, 0, 0)
CloseBtn.TextColor3 = Color3.new(1,1,1)
CloseBtn.Font = Enum.Font.SourceSansBold
CloseBtn.TextSize = 14

Instance.new("UICorner", CloseBtn).CornerRadius = UDim.new(0,6)

CloseBtn.MouseButton1Click:Connect(function()
	Frame.Visible = false
	OpenBtn.Visible = true
end)

OpenBtn.MouseButton1Click:Connect(function()
	Frame.Visible = true
	OpenBtn.Visible = false
end)
